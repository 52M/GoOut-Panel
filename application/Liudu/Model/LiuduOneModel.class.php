<?php
namespace Liudu\Model;
use Common\Model\CommonModel;
class LiuduOneModel extends CommonModel
{

	public $groupMember = '{"code":0,"data":{"alpha":0,"bbscount":0,"class":10452,"create_time":1316667372,"filecount":0,"finger_memo":"你告诉你的朋友，也告诉陌生的人，任何人，只要可以让你有地方可以依靠，相信所有该死","group_memo":"详情：\u0001http:\/\/zcxhg.com\/archives\/55\u0002","group_name":"六度成都","item":[{"iscreator":0,"ismanager":0,"nick":"影无踪","uin":50894},{"iscreator":0,"ismanager":0,"nick":"皒-[無情],","uin":575408},{"iscreator":0,"ismanager":0,"nick":"大熊","uin":911021},{"iscreator":0,"ismanager":0,"nick":"     冉貂貂","uin":12013487},{"iscreator":0,"ismanager":0,"nick":"赵鑫","uin":12971213},{"iscreator":0,"ismanager":0,"nick":"汪露","uin":17879403},{"iscreator":0,"ismanager":0,"nick":"逍遥岚轩","uin":19487298},{"iscreator":0,"ismanager":0,"nick":"李安","uin":21259601},{"iscreator":0,"ismanager":0,"nick":"???\/day","uin":22583625},{"iscreator":0,"ismanager":0,"nick":"薛~~~","uin":28196403},{"iscreator":0,"ismanager":0,"nick":"Attitude","uin":33709518},{"iscreator":0,"ismanager":0,"nick":"可是我们","uin":54324373},{"iscreator":0,"ismanager":0,"nick":"天木箭","uin":78651402},{"iscreator":0,"ismanager":0,"nick":"霞范儿","uin":105552509},{"iscreator":0,"ismanager":0,"nick":"伤寒泪","uin":172377941},{"iscreator":0,"ismanager":0,"nick":"岳映华","uin":182330121},{"iscreator":0,"ismanager":0,"nick":"、那些我怀念的つ","uin":228711832},{"iscreator":0,"ismanager":0,"nick":"杨亮","uin":236533253},{"iscreator":0,"ismanager":0,"nick":"郑潇敏","uin":237352336},{"iscreator":0,"ismanager":0,"nick":"瓶魅↓一抹邪、","uin":260060733},{"iscreator":0,"ismanager":0,"nick":"二舅妈","uin":264065696},{"iscreator":0,"ismanager":0,"nick":"何海伦","uin":281081987},{"iscreator":0,"ismanager":0,"nick":"许冬生","uin":286335771},{"iscreator":1,"ismanager":0,"nick":"黑桃K","uin":286625487},{"iscreator":0,"ismanager":0,"nick":"蒋雯雯","uin":286671254},{"iscreator":0,"ismanager":0,"nick":"石成峰","uin":287519439},{"iscreator":0,"ismanager":0,"nick":"T.S.","uin":291241292},{"iscreator":0,"ismanager":0,"nick":"时光の缝隙","uin":294947175},{"iscreator":0,"ismanager":0,"nick":"瑶瑶","uin":295668586},{"iscreator":0,"ismanager":0,"nick":"何少华","uin":303746899},{"iscreator":0,"ismanager":0,"nick":"姜磊","uin":327459670},{"iscreator":0,"ismanager":0,"nick":"唐花花","uin":328931385},{"iscreator":0,"ismanager":0,"nick":"赵仕成","uin":332141172},{"iscreator":0,"ismanager":0,"nick":"邓毓生","uin":341112690},{"iscreator":0,"ismanager":0,"nick":"易冬阳","uin":343145099},{"iscreator":0,"ismanager":0,"nick":"郑琴","uin":343274862},{"iscreator":0,"ismanager":0,"nick":"唐远高","uin":360357532},{"iscreator":0,"ismanager":0,"nick":"F矛盾邂逅","uin":361192369},{"iscreator":0,"ismanager":0,"nick":"何洋","uin":364243775},{"iscreator":0,"ismanager":0,"nick":"峭壁上的树","uin":369045797},{"iscreator":0,"ismanager":0,"nick":"丹妹儿","uin":369596946},{"iscreator":0,"ismanager":0,"nick":"杨子倩","uin":370045364},{"iscreator":0,"ismanager":0,"nick":"大群管-小海","uin":377488049},{"iscreator":0,"ismanager":0,"nick":"正国","uin":382969553},{"iscreator":0,"ismanager":0,"nick":"why","uin":402949193},{"iscreator":0,"ismanager":0,"nick":"武利磊","uin":411428093},{"iscreator":0,"ismanager":0,"nick":"汪海","uin":412823358},{"iscreator":0,"ismanager":0,"nick":"‭‍‪‍‪‍ ","uin":416317201},{"iscreator":0,"ismanager":0,"nick":"谢瑞","uin":417489804},{"iscreator":0,"ismanager":0,"nick":"血的洗礼","uin":417520251},{"iscreator":0,"ismanager":0,"nick":"你已被管理员移出本群","uin":421506532},{"iscreator":0,"ismanager":1,"nick":"浪哥\/huaix","uin":441793914},{"iscreator":0,"ismanager":0,"nick":"...-","uin":444920175},{"iscreator":0,"ismanager":0,"nick":"best one","uin":451301574},{"iscreator":0,"ismanager":0,"nick":"邹建锋","uin":452317498},{"iscreator":0,"ismanager":0,"nick":"有度","uin":459460647},{"iscreator":0,"ismanager":0,"nick":"麦片。","uin":472697774},{"iscreator":0,"ismanager":0,"nick":"毛素琴","uin":491813742},{"iscreator":0,"ismanager":0,"nick":"末、等生","uin":499123932},{"iscreator":0,"ismanager":0,"nick":"我心有猛虎。","uin":511106055},{"iscreator":0,"ismanager":0,"nick":"刘承员","uin":514195783},{"iscreator":0,"ismanager":0,"nick":"兂処岢逃","uin":516069761},{"iscreator":0,"ismanager":0,"nick":"❤️泡菜❤️","uin":525354037},{"iscreator":0,"ismanager":0,"nick":"黄凯","uin":542594600},{"iscreator":0,"ismanager":0,"nick":"Fyon_Steven","uin":544600189},{"iscreator":0,"ismanager":0,"nick":"何唯","uin":561074510},{"iscreator":0,"ismanager":0,"nick":"梦圆舞曲","uin":569452566},{"iscreator":0,"ismanager":0,"nick":"李月林","uin":574800649},{"iscreator":0,"ismanager":0,"nick":"RenDW","uin":604028648},{"iscreator":0,"ismanager":0,"nick":"杨敏","uin":632796289},{"iscreator":0,"ismanager":1,"nick":"发飙的兔子","uin":635536177},{"iscreator":0,"ismanager":0,"nick":"奕淮网络","uin":641085084},{"iscreator":0,"ismanager":0,"nick":"zero涵。","uin":646370204},{"iscreator":0,"ismanager":0,"nick":"唐强","uin":649671862},{"iscreator":0,"ismanager":0,"nick":" Miss·","uin":654463239},{"iscreator":0,"ismanager":0,"nick":"梅子","uin":694710968},{"iscreator":0,"ismanager":0,"nick":"眼镜","uin":707662504},{"iscreator":0,"ismanager":0,"nick":"如晴天，似雨天。","uin":709820410},{"iscreator":0,"ismanager":0,"nick":"友","uin":724254791},{"iscreator":0,"ismanager":0,"nick":"不再让你流泪","uin":727493684},{"iscreator":0,"ismanager":0,"nick":"Ai•ana","uin":804830551},{"iscreator":0,"ismanager":0,"nick":"记忆斑驳的那些旧时光","uin":821059935},{"iscreator":0,"ismanager":0,"nick":" say 、","uin":864897134},{"iscreator":0,"ismanager":1,"nick":"李一 -大群管","uin":871537721},{"iscreator":0,"ismanager":0,"nick":"____码奴  niisc","uin":871899325},{"iscreator":0,"ismanager":0,"nick":"一去二三里","uin":875756782},{"iscreator":0,"ismanager":0,"nick":"李勇","uin":891941828},{"iscreator":0,"ismanager":0,"nick":"庞海燕","uin":894193088},{"iscreator":0,"ismanager":1,"nick":"依然单身的群管","uin":896785313},{"iscreator":0,"ismanager":0,"nick":"soul","uin":939669310},{"iscreator":0,"ismanager":1,"nick":"帅气的空空","uin":991763019},{"iscreator":0,"ismanager":0,"nick":"牟鹏","uin":1017158014},{"iscreator":0,"ismanager":0,"nick":"分析中","uin":1062870783},{"iscreator":0,"ismanager":0,"nick":"▍Memor. _丶媚ヾ ` 。","uin":1171053411},{"iscreator":0,"ismanager":0,"nick":"     ","uin":1184799580},{"iscreator":0,"ismanager":0,"nick":"丸子～丸子","uin":1227093845},{"iscreator":0,"ismanager":0,"nick":"Z·👶","uin":1249635868},{"iscreator":0,"ismanager":0,"nick":"一切都是等待。","uin":1259914081},{"iscreator":0,"ismanager":0,"nick":"苟靖茗","uin":1291006268},{"iscreator":0,"ismanager":0,"nick":"青に鳥","uin":1300592398},{"iscreator":0,"ismanager":0,"nick":"2\/2star°","uin":1332286476},{"iscreator":0,"ismanager":0,"nick":"薇薇","uin":1343376170},{"iscreator":0,"ismanager":0,"nick":"陈拉","uin":1364101476},{"iscreator":0,"ismanager":0,"nick":"跃然纸上","uin":1414673660},{"iscreator":0,"ismanager":0,"nick":"淡淡男人味","uin":1433427658},{"iscreator":0,"ismanager":0,"nick":"~~~~~~","uin":1457626996},{"iscreator":0,"ismanager":0,"nick":"null","uin":1826953647},{"iscreator":0,"ismanager":0,"nick":"金日之星","uin":2319833980},{"iscreator":0,"ismanager":0,"nick":"沈倩","uin":2359174921},{"iscreator":0,"ismanager":0,"nick":"胡珍","uin":2495979495},{"iscreator":0,"ismanager":0,"nick":"2669039000","uin":2669039000},{"iscreator":0,"ismanager":0,"nick":"屌丝男士","uin":2802499498},{"iscreator":0,"ismanager":0,"nick":"静若","uin":2827688437},{"iscreator":0,"ismanager":0,"nick":"银时酱","uin":2931690431}],"level":0,"nick":"圣·克伦威尔","option":2,"total":114},"default":0,"message":"","subcode":0}';

	protected $_validate = array(
		array('name', 'require', '昵称不能为空', 1, 'regex', CommonModel:: MODEL_BOTH  ),
		array('qq','','该QQ号已经获取了抽奖号',0,'unique',CommonModel:: MODEL_BOTH ),
		array('number','','该抽奖号已经存在',0,'unique',CommonModel:: MODEL_BOTH ),
	);
	
	public function mGetDate() {
		return date('Y-m-d H:i:s');
	}

	protected function _before_write(&$data) {
		parent::_before_write($data);
		$data['create_time'] = $this -> mGetDate();
	}
	
	public function checknum($num){
		if(!is_numeric($num)){
			return "请输入数字！";
		}
		if(strlen($num) != 3){
			return "请输入3位数字！";
		}
		return 2;
	}

	public function checkqq($qq){
		$gourp = json_decode($this -> groupMember);
		$gourp = $gourp ->data -> item;
		foreach($gourp as $v){
			if($v ->uin == $qq){
				return 2;
			}
		}
		return "你不是六度群成员，请填写六度群成员内QQ号";
	}
	
}